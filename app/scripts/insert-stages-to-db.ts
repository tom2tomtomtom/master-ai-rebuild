import { createClient } from '@supabase/supabase-js';
import * as dotenv from 'dotenv';
import { resolve } from 'path';

// Load environment variables
dotenv.config({ path: resolve(__dirname, '../.env.local') });

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;
const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY!;

const supabase = createClient(supabaseUrl, supabaseServiceKey);

// Stage data from parser output (lesson-01)
const stages = [
  {
    "lesson_id": "lesson-01",
    "stage_number": 1,
    "title": "âš¡ Your First Professional Email in 60 Seconds",
    "slug": "-your-first-professional-email-in-60-seconds",
    "content": "## âš¡ Your First Professional Email in 60 Seconds\n\nLet's write a complete business email right now using GPT-5's communication mode.\n\n### Copy This Exact Prompt:\n\n```\nYou are my executive communication assistant. Write a professional email:\n\nTO: [RECIPIENT NAME/ROLE]\nCONTEXT: [1-2 sentence situation]\nPURPOSE: [What you want to accomplish]\nTONE: [Professional/Friendly/Formal/Urgent]\nKEY POINTS:\n- [Point 1]\n- [Point 2]\n- [Point 3]\n\nConstraints:\n- Under 150 words\n- Clear call-to-action\n- Subject line included\n```\n\n**Customize:**\n- RECIPIENT: \"Sarah Chen, VP of Marketing at Acme Corp\"\n- CONTEXT: \"Following up on our demo call from Tuesday\"\n- PURPOSE: \"Schedule implementation kickoff meeting\"\n- TONE: \"Professional but warm\"\n\n### What You Should See:\n\nA complete email with subject line, greeting, concise body covering your key points, clear call-to-action, and appropriate closing. Professional quality, ready to send with minimal editing.\n\n### Success Indicator:\nâœ… You have a sendable email in under 60 seconds that would have taken 10-15 minutes to write manually\n\n---",
    "content_type": "practice",
    "estimated_minutes": 5,
    "difficulty": "beginner",
    "is_required": true,
    "display_order": 1,
    "is_published": true
  },
  {
    "lesson_id": "lesson-01",
    "stage_number": 2,
    "title": "ðŸ’° The Business Reality",
    "slug": "-the-business-reality",
    "content": "## ðŸ’° The Business Reality\n\nProfessional communication dominates your workday, and most of it is repetitive:\n- **Email overload**: The average professional spends 28% of their workday managing email (11.2 hours/week), with 40% of messages following predictable patterns\n- **Context switching**: Writing emails interrupts deep work 50+ times per day, destroying focus and productivityâ€”each interruption costs 23 minutes to recover\n- **Communication debt**: Sales teams spend 21% of their time writing emails instead of talking to prospects, costing $4,000+ per rep per month in lost opportunities\n\nGPT-5's November 2025 release brought Gmail integration and automatic mode selection, enabling true agentic email management for the first time.\n\n**Today's ROI:**\n- Time saved: 10-12 hours/week on email and messaging\n- Money saved: $2,000+/month in recovered productive time\n- Capability gained: Professional-quality communication in 60 seconds instead of 15 minutes\n\n---",
    "content_type": "reading",
    "estimated_minutes": 3,
    "difficulty": "beginner",
    "is_required": true,
    "display_order": 2,
    "is_published": true
  },
  {
    "lesson_id": "lesson-01",
    "stage_number": 3,
    "title": "Foundation Level (5 minutes)",
    "slug": "foundation-level-5-minutes",
    "content": "### Foundation Level (5 minutes)\n*Master structured prompting for high-stakes communication*\n\n**Exercise 1: The Three Pillars of High-Stakes Communication**\n\nThis exercise focuses on the **complexity/use case** approach, moving beyond simple templates to master three critical, high-leverage communication scenarios: **Negotiation**, **Conflict Resolution**, and **Executive Summary**.\n\n### Template 1: The Win-Win Negotiation Framework (High Complexity)\n\n**Name:** The Structured Negotiation Architect\n\n**When to use:**\n- When negotiating a contract renewal with a key vendor.\n- When asking for a significant raise or promotion.\n- When resolving a budget dispute between two departments.\n- When securing a new, large client contract with custom terms.\n- When discussing resource allocation for a critical project.\n\n**Setup Prompt:**\n```\nYou are a professional negotiator and my communication coach. Draft a formal email to [RECIPIENT NAME/ROLE] to initiate a negotiation.\n\nCONTEXT: [Briefly describe the current situation and the desired outcome]\nMY POSITION: [My ideal outcome and non-negotiable terms]\nTHEIR LIKELY POSITION: [Their expected ideal outcome and potential sticking points]\nANCHORING OFFER: [The specific, well-justified opening offer I will present]\nCONCESSION STRATEGY: [The specific term I am willing to concede, and what I expect in return]\nTONE: [Assertive, Collaborative, Data-Driven]\n\nGOAL: Secure a [SPECIFIC OUTCOME] with a minimum [METRIC] improvement.\n```\n\n**Practice Scenario:**\nYou are the Head of Product at a SaaS company. Your key vendor, \"DataFlow Inc.,\" is raising its annual license fee from **$150,000** to **$225,000** (a 50% increase). You need to negotiate a reduction to a maximum of **$175,000** and secure a guaranteed uptime SLA of **99.99%** (up from 99.9%).\n\n**Success Metrics:**\nâœ… The email clearly states the anchoring offer of $175,000.\nâœ… The tone is professional, assertive, and collaborative.\nâœ… The email justifies the counter-offer using data (e.g., current usage, market rates).\nâœ… The request for the 99.99% SLA is explicitly tied to the price discussion.\nâœ… The prompt includes a clear Call-to-Action for a follow-up call.\nâœ… The output is under 250 words, respecting the recipient's time.\nâœ… The email frames the negotiation as a long-term partnership.\nâœ… The prompt successfully guided the AI to mention the $175,000 and 99.99% figures.\n\n---\n\n### Template 2: The De-escalation and Resolution Email (Medium Complexity)\n\n**Name:** The Conflict Resolution Mediator\n\n**When to use:**\n- When a client is highly dissatisfied and threatening to churn.\n- When an internal team member has missed a critical deadline, impacting others.\n- When responding to a public negative review or social media complaint.\n- When a partner has violated a term of your agreement.\n- When providing difficult performance feedback to a direct report.\n\n**Setup Prompt:**\n```\nYou are a conflict resolution specialist. Draft an email to [RECIPIENT NAME/ROLE] to de-escalate a tense situation and propose a path to resolution.\n\nTHE INCIDENT: [Factual, non-emotional description of the problem]\nIMPACT: [Quantify the negative impact: e.g., $10,000 loss, 48-hour delay]\nEMPATHY STATEMENT: [Acknowledge their frustration/pain point]\nPROPOSED SOLUTION (3 Steps): [Specific, actionable steps to fix the issue]\nTONE: [Empathetic, Accountable, Solution-Oriented]\n\nGOAL: Achieve a mutual agreement on the 3-step solution within [48 HOURS].\n```\n\n**Practice Scenario:**\nYou are a Project Manager. Your client, \"GlobalTech,\" is furious because a key deliverable was delayed by **48 hours**, causing them to miss an internal presentation to their board, which was scheduled for 10:00 AM on Tuesday. The delay was due to a technical bug that took your team **15 hours** to fix. You need to apologize, take accountability, and offer a **20% discount** on the next month's service fee as compensation.\n\n**Success Metrics:**\nâœ… The email begins with a clear, unreserved apology.\nâœ… The prompt ensures the email avoids blaming internal teams.\nâœ… The output explicitly mentions the 48-hour delay and the 15-hour fix time.\nâœ… The 20% discount is clearly and professionally offered.\nâœ… The email proposes a clear, 3-step resolution plan (e.g., fix, post-mortem, discount).\nâœ… The tone successfully shifts from empathetic to solution-oriented.\nâœ… The prompt includes a clear Call-to-Action for the next step.\nâœ… The email is structured to prevent further emotional response.\n\n---\n\n### Template 3: The Data-Driven Executive Summary (Low Complexity, High Value)\n\n**Name:** The Insight Synthesizer\n\n**When to use:**\n- When summarizing a complex 50-page report for a C-level executive.\n- When providing a weekly performance update to a steering committee.\n- When requesting budget approval for a new initiative.\n- When summarizing a long email thread or meeting transcript.\n- When preparing a briefing for a stakeholder before a critical meeting.\n\n**Setup Prompt:**\n```\nYou are an executive communication specialist. Condense the following [SOURCE TYPE: e.g., report, meeting transcript, data set] into a concise, action-oriented executive summary email for [RECIPIENT NAME/ROLE].\n\nSOURCE CONTENT: [Paste the text or link to the source document]\nKEY DATA POINTS TO HIGHLIGHT: [3-5 specific metrics or findings]\nIMPLICATIONS: [What this data means for the business]\nRECOMMENDED ACTION: [A single, clear, high-impact action item]\nTONE: [Direct, Confident, Analytical]\n\nGOAL: Inform the executive and secure approval for the Recommended Action within [24 HOURS].\n```\n\n**Practice Scenario:**\nYou have a 50-page Q3 Sales Report. The key findings are: (1) **Revenue is up 12%** year-over-year, (2) **Customer Acquisition Cost (CAC) increased by $45** due to a new ad platform, and (3) **Churn decreased from 5% to 3%** in the enterprise segment. You need to summarize this for the CEO and recommend an immediate **$20,000** reallocation from the underperforming ad platform to the successful enterprise retention team.\n\n**Success Metrics:**\nâœ… The summary is under 150 words (excluding the action item).\nâœ… The email clearly highlights the 12% revenue increase and the 3% churn rate.\nâœ… The email explicitly mentions the $45 CAC increase.\nâœ… The prompt successfully guides the AI to recommend the $20,000 reallocation.\nâœ… The tone is direct and focuses on business impact.\nâœ… The email contains a single, clear Call-to-Action for approval.\nâœ… The subject line is concise and value-focused (e.g., \"Q3 Performance & Budget Action\").\nâœ… The summary clearly separates data from the recommended action.\n\n---\n\n### What You're Learning (5 âœ… Principles)\n\n1.  âœ… **Structured Input is Power:** High-quality output requires highly structured input. By defining the **Context, Position, Anchoring Offer, and Tone** (as in Template 1), you eliminate AI guesswork and ensure a precise, professional result.\n2.  âœ… **Quantification Drives Credibility:** The use of **REAL NUMBERS** (e.g., $150,000, 48 hours, 12% revenue) grounds the AI's response in reality, making the communication more authoritative and actionable.\n3.  âœ… **Complexity Mapping:** The best templates are designed for specific levels of complexityâ€”from simple information transfer to high-stakes, multi-variable **Negotiation**â€”allowing you to match the tool to the task.\n4.  âœ… **Emotional Layering:** Professional communication is not just about facts; it's about tone. Explicitly setting the **Emotional Tone** (e.g., Assertive, Empathetic, Accountable) ensures the message lands correctly with the recipient.\n5.  âœ… **Iterative Refinement:** By generating multiple versions (like the Difficult Conversation Template in the original lesson) or using **Success Metrics** to check the output, you establish a quality control loop that guarantees a 10/10 result.\n\n### Try It Now (7 Steps)\n\n1.  **Select a Scenario:** Choose one of the three templates (Negotiation, Conflict, or Summary) that matches your most urgent professional communication need this week.\n2.  **Gather Your Data:** Collect all the **REAL NUMBERS** and factual context required for the chosen template (e.g., current cost, desired SLA, percentage changes).\n3.  **Define the Goal:** Write down the single, most important outcome you want to achieve (e.g., \"Reduce cost by $50k,\" \"Secure approval,\" \"De-escalate client\").\n4.  **Fill the [BRACKETS]:** Copy the full Setup Prompt and meticulously fill in every bracketed placeholder with your specific, structured input.\n5.  **Generate the Draft:** Paste the completed prompt into your ChatGPT interface and generate the email.\n6.  **Check the Metrics:** Review the AI's output against the 7-10 **Success Metrics** listed under the template. Edit the draft only where it fails a metric.\n7.  **Send and Track:** Send the finalized email and track the result. Did the structured prompt lead to a faster, better outcome?\n\n---\n\n### Intermediate Level (7 minutes)\n*Advanced tone control and personality modes*\n\n**Exercise 2: Mastering Tone and Voice Consistency**\n\n**Scenario:** You're a customer success manager handling three very different email situations: (1) apologizing for a service outage to an angry client, (2) upselling a happy customer, and (3) negotiating a contract renewal with a price-sensitive buyer. Each requires a completely different tone, but all need to sound like YOU, not a robot.\n\n**Your Mission:** Learn to control tone precisely and maintain authentic voice across different contexts.\n\n**GPT-5's Tone Spectrum:**\n\n```\nCOMMUNICATION TONE MATRIX (GPT-5)\n\nUltra-Formal â†’ Formal â†’ Professional â†’ Conversational â†’ Casual â†’ Ultra-Casual\n     |            |            |              |              |           |\n Legal/        Executive    Standard       Colleague    Friend     Internal\nCompliance     Comms      Business Email    Chat        Text       Slack\n\nEMOTIONAL TONE (layer on top):\n- Apologetic (service recovery)\n- Enthusiastic (sales, partnership)\n- Empathetic (support, coaching)\n- Assertive (negotiation, boundaries)\n- Neutral (informational, status updates)\n```\n\n**Advanced Prompt with Tone Control:**\n\n```\nYou are writing as [YOUR NAME], [YOUR ROLE] at [COMPANY]. Your writing voice is:\n- [Characteristic 1: e.g., \"Direct but warm\"]\n- [Characteristic 2: e.g., \"Data-driven with storytelling\"]\n- [Characteristic 3: e.g., \"Solution-focused, not problem-focused\"]\n\nSITUATION: [Describe scenario]\nRECIPIENT: [Name, role, context]\nEMOTIONAL TONE: [Apologetic/Enthusiastic/Empathetic/Assertive/Neutral]\nFORMALITY LEVEL: [Use the spectrum above]\n\nMESSAGE PURPOSE: [What you want to achieve]\n\nWRITING REQUIREMENTS:\n- Start with [specific opening approach]\n- Include [must-have element]\n- Avoid [thing you never say]\n- End with [specific closing approach]\n- Length: [word count]\n\nWrite the email.\n```\n\n**Worked Example - Service Recovery:**\n\n```\nYou are writing as Marcus Johnson, Senior Customer Success Manager at CloudScale. Your writing voice is:\n- Accountable and solution-focused (own problems, offer fixes)\n- Technical enough to be credible, simple enough to be clear\n- Always end with specific next action and timeline\n\nSITUATION: 6-hour database outage affected client's production environment during business hours, their team couldn't access critical reports\nRECIPIENT: Jennifer Wu, COO at MidMarket Inc (uses our platform for real-time analytics)\nEMOTIONAL TONE: Apologetic + Reassuring\nFORMALITY LEVEL: Professional (standard business email)\n\nMESSAGE PURPOSE: \n1. Take accountability \n2. Explain what happened (without excuses)\n3. Show what we're doing to prevent recurrence\n4. Offer specific compensation/recovery\n\nWRITING REQUIREMENTS:\n- Start with direct acknowledgment (no fluff)\n- Include specific incident details (times, impact scope)\n- Avoid: \"We're sorry for any inconvenience\" (too generic)\n- End with: Concrete next step + my direct contact\n- Length: 200 words max\n\nWrite the email.\n```\n\n**GPT-5's Output Quality Check:**\n- âœ… Opens with specific acknowledgment: \"I'm writing about the 6-hour database outage that impacted your production analytics...\"\n- âœ… Uses factual language: \"From 9:15 AM to 3:30 PM EST...\"\n- âœ… Shows accountability without excuses: \"This was caused by... Here's what we're doing...\"\n- âœ… Offers concrete remedy: \"We're crediting your account for one month of service...\"\n- âœ… Ends with action: \"I'll call you at 2 PM today to discuss...\"\n\n**Pro Technique - Voice Calibration:**\n\nIf GPT-5's output doesn't sound like you, show it examples:\n\n```\nHere are 3 emails I've written recently that represent my voice:\n\n[EXAMPLE 1: paste actual email you wrote]\n[EXAMPLE 2: paste actual email you wrote]\n[EXAMPLE 3: paste actual email you wrote]\n\nNotice my style: [what makes your writing unique]\n\nNow write [NEW EMAIL REQUEST] in this same voice.\n```\n\n**Try It Now:**\nTake a complex email you've been putting off (apology, negotiation, or delicate feedback). Use the advanced tone control prompt. Compare GPT-5's output to what you would have written. Edit to make it perfect.\n\n---\n\n### Advanced Level (8 minutes)\n*Agentic email management with GPT-5's Gmail integration*\n\n**Exercise 3: Setting Up Autonomous Email Management**\n\n**Scenario:** You receive 80-120 emails per day. About 60% fall into categories you handle repetitively: meeting confirmations, simple questions about your product, intro requests, newsletter stuff, sales outreach, etc. You want GPT-5 to draft responses for batches of similar emails, which you review and send (or refine) in 10-minute sessions twice a day.\n\n**Your Mission:** Configure GPT-5's Gmail integration for semi-autonomous email management.\n\n**Agentic Email Workflow Setup:**\n\n**Step 1: Define Your Email Categories**\n\n```\nMy Email Response Matrix:\n\nCATEGORY 1: Meeting Confirmations/Scheduling\n- Trigger: Email mentions \"meeting,\" \"call,\" \"coffee,\" \"time to chat\"\n- Response pattern: Confirm time, add to calendar, send Zoom link, set reminder\n- Autonomy level: Draft only (I review before sending)\n\nCATEGORY 2: Product/Service Questions (Common FAQs)\n- Trigger: Questions about pricing, features, implementation timeline\n- Response pattern: Direct answer + link to resource + offer follow-up call\n- Autonomy level: Draft only (I review before sending)\n\nCATEGORY 3: Introduction Requests\n- Trigger: \"Would you intro me to...\" or \"Can you connect me with...\"\n- Response pattern: Assess if appropriate, make intro or politely decline\n- Autonomy level: Draft only (relationship-sensitive)\n\nCATEGORY 4: Newsletters/Marketing (Read Later)\n- Trigger: From known senders, promotional language, unsubscribe link\n- Response pattern: Auto-label \"Read/Later\" folder, mark as read, no response\n- Autonomy level: Fully autonomous\n\nCATEGORY 5: Sales Outreach (Not Interested)\n- Trigger: Cold outreach with generic pitch\n- Response pattern: Polite decline or no response, unsubscribe if persistent\n- Autonomy level: Fully autonomous\n\nCATEGORY 6: Urgent/VIP (Escalate to Me)\n- Trigger: From boss, key clients, specific project keywords\n- Response pattern: Notify me immediately, flag for personal response\n- Autonomy level: Alert only (I handle directly)\n```\n\n**Step 2: Configure GPT-5 Gmail Integration**\n\n*(Note: As of November 2025, GPT-5 offers Gmail integration in ChatGPT Plus/Pro)*\n\n```\nGPT-5 GMAIL AGENT CONFIGURATION:\n\nYou are my email assistant with access to my Gmail. Your job:\n- Review incoming emails 2x daily (9 AM, 2 PM)\n- Categorize using my Response Matrix (above)\n- Draft responses for Categories 1-3\n- Automatically handle Categories 4-5\n- Flag Category 6 for my immediate attention\n\nDRAFTING RULES:\n- Use my voice (see voice examples below)\n- Include original email context in draft for my review\n- Flag any uncertainty (\"I wasn't sure if...\" notes)\n- Never send without my approval (Categories 1-3)\n- Do send auto-responses (Categories 4-5) per my rules\n\nVOICE EXAMPLES:\n[Paste 5 of your actual emails showing your style]\n\nERROR HANDLING:\n- If unsure about category: Flag for my review\n- If email contains multiple topics: Break into separate draft responses\n- If email requires decision I haven't given guidance on: Ask me, don't guess\n\nREPORT FORMAT:\nAfter each review session, summarize:\n- Emails processed: [number]\n- Drafts ready for review: [number by category]\n- Auto-handled: [number by category]\n- Flagged urgent: [number]\n- Questions for me: [any uncertainties]\n```\n\n**Step 3: Review Session Workflow**\n\nSet up twice-daily 10-minute review sessions:\n\n**Morning Review (9:15 AM):**\n```\nShow me:\n1. All drafted responses from overnight emails (Categories 1-3)\n2. Any flagged urgent items (Category 6)\n3. Summary of auto-handled emails (Categories 4-5)\n\nFor each draft:\n- Show original email + your draft side-by-side\n- Explain your reasoning (why this tone/approach)\n- Accept my edits or \"Send as-is\" command\n```\n\n**Afternoon Review (2:15 PM):**\n```\n[Same format as morning review for midday emails]\n```\n\n**Step 4: Measuring Success**\n\nTrack these metrics for 2 weeks:\n\n```\nEMAIL MANAGEMENT METRICS:\n\nBEFORE AI (Week 0):\n- Time spent on email: ___ hours/day\n- Emails requiring my writing: ___ per day\n- Average time per email: ___ minutes\n- Emails left unresponded > 24hrs: ___\n\nAFTER AI (Week 2):\n- Time spent on email: ___ hours/day (target: 50% reduction)\n- Emails requiring my writing: ___ per day (target: 60% reduction)\n- Average time per email: ___ minutes (review only)\n- Emails left unresponded > 24hrs: ___ (target: near zero)\n\nTIME SAVED: ___ hours/week\nVALUE OF TIME: ___ hours Ã— $[hourly rate] = $___/week = $___/month\nROI: (Monthly value - $20 subscription) / $20 = ___%\n```\n\n**Advanced Patterns:**\n\n**Pattern 1: Batch Similar Emails**\n```\nI have 12 emails asking about pricing. Draft one master response that I can customize for each. Identify which emails need unique details added (company size, use case, etc.).\n```\n\n**Pattern 2: Thread Management**\n```\nSummarize this 18-email thread and draft my response to move the conversation forward. Include \"Catching up on this thread:\" opening so they know I've read everything.\n```\n\n**Pattern 3: Follow-Up Automation**\n```\nFor any email where I say \"I'll send you [RESOURCE] by [DATE],\" create a calendar reminder and draft the follow-up email with [RESOURCE] attached for me to review on [DATE].\n```\n\n**Expert-Level Achievement:**\nYou'll know you've mastered agentic email management when:\n- You spend < 1 hour/day on email (down from 2-3 hours)\n- 70%+ of your sent emails originated from AI drafts you edited\n- Your response time improved (< 4 hours average)\n- You never miss important emails due to volume\n- You've reclaimed 10+ hours/week for strategic work\n\n---",
    "content_type": "exercise",
    "estimated_minutes": 15,
    "difficulty": "beginner",
    "is_required": true,
    "display_order": 3,
    "is_published": true
  },
  {
    "lesson_id": "lesson-01",
    "stage_number": 4,
    "title": "Intermediate Level (7 minutes)",
    "slug": "intermediate-level-7-minutes",
    "content": "### Intermediate Level (7 minutes)\n*Advanced tone control and personality modes*\n\n**Exercise 2: Mastering Tone and Voice Consistency**\n\n**Scenario:** You're a customer success manager handling three very different email situations: (1) apologizing for a service outage to an angry client, (2) upselling a happy customer, and (3) negotiating a contract renewal with a price-sensitive buyer. Each requires a completely different tone, but all need to sound like YOU, not a robot.\n\n**Your Mission:** Learn to control tone precisely and maintain authentic voice across different contexts.\n\n**GPT-5's Tone Spectrum:**\n\n```\nCOMMUNICATION TONE MATRIX (GPT-5)\n\nUltra-Formal â†’ Formal â†’ Professional â†’ Conversational â†’ Casual â†’ Ultra-Casual\n     |            |            |              |              |           |\n Legal/        Executive    Standard       Colleague    Friend     Internal\nCompliance     Comms      Business Email    Chat        Text       Slack\n\nEMOTIONAL TONE (layer on top):\n- Apologetic (service recovery)\n- Enthusiastic (sales, partnership)\n- Empathetic (support, coaching)\n- Assertive (negotiation, boundaries)\n- Neutral (informational, status updates)\n```\n\n**Advanced Prompt with Tone Control:**\n\n```\nYou are writing as [YOUR NAME], [YOUR ROLE] at [COMPANY]. Your writing voice is:\n- [Characteristic 1: e.g., \"Direct but warm\"]\n- [Characteristic 2: e.g., \"Data-driven with storytelling\"]\n- [Characteristic 3: e.g., \"Solution-focused, not problem-focused\"]\n\nSITUATION: [Describe scenario]\nRECIPIENT: [Name, role, context]\nEMOTIONAL TONE: [Apologetic/Enthusiastic/Empathetic/Assertive/Neutral]\nFORMALITY LEVEL: [Use the spectrum above]\n\nMESSAGE PURPOSE: [What you want to achieve]\n\nWRITING REQUIREMENTS:\n- Start with [specific opening approach]\n- Include [must-have element]\n- Avoid [thing you never say]\n- End with [specific closing approach]\n- Length: [word count]\n\nWrite the email.\n```\n\n**Worked Example - Service Recovery:**\n\n```\nYou are writing as Marcus Johnson, Senior Customer Success Manager at CloudScale. Your writing voice is:\n- Accountable and solution-focused (own problems, offer fixes)\n- Technical enough to be credible, simple enough to be clear\n- Always end with specific next action and timeline\n\nSITUATION: 6-hour database outage affected client's production environment during business hours, their team couldn't access critical reports\nRECIPIENT: Jennifer Wu, COO at MidMarket Inc (uses our platform for real-time analytics)\nEMOTIONAL TONE: Apologetic + Reassuring\nFORMALITY LEVEL: Professional (standard business email)\n\nMESSAGE PURPOSE: \n1. Take accountability \n2. Explain what happened (without excuses)\n3. Show what we're doing to prevent recurrence\n4. Offer specific compensation/recovery\n\nWRITING REQUIREMENTS:\n- Start with direct acknowledgment (no fluff)\n- Include specific incident details (times, impact scope)\n- Avoid: \"We're sorry for any inconvenience\" (too generic)\n- End with: Concrete next step + my direct contact\n- Length: 200 words max\n\nWrite the email.\n```\n\n**GPT-5's Output Quality Check:**\n- âœ… Opens with specific acknowledgment: \"I'm writing about the 6-hour database outage that impacted your production analytics...\"\n- âœ… Uses factual language: \"From 9:15 AM to 3:30 PM EST...\"\n- âœ… Shows accountability without excuses: \"This was caused by... Here's what we're doing...\"\n- âœ… Offers concrete remedy: \"We're crediting your account for one month of service...\"\n- âœ… Ends with action: \"I'll call you at 2 PM today to discuss...\"\n\n**Pro Technique - Voice Calibration:**\n\nIf GPT-5's output doesn't sound like you, show it examples:\n\n```\nHere are 3 emails I've written recently that represent my voice:\n\n[EXAMPLE 1: paste actual email you wrote]\n[EXAMPLE 2: paste actual email you wrote]\n[EXAMPLE 3: paste actual email you wrote]\n\nNotice my style: [what makes your writing unique]\n\nNow write [NEW EMAIL REQUEST] in this same voice.\n```\n\n**Try It Now:**\nTake a complex email you've been putting off (apology, negotiation, or delicate feedback). Use the advanced tone control prompt. Compare GPT-5's output to what you would have written. Edit to make it perfect.\n\n---\n\n### Advanced Level (8 minutes)\n*Agentic email management with GPT-5's Gmail integration*\n\n**Exercise 3: Setting Up Autonomous Email Management**\n\n**Scenario:** You receive 80-120 emails per day. About 60% fall into categories you handle repetitively: meeting confirmations, simple questions about your product, intro requests, newsletter stuff, sales outreach, etc. You want GPT-5 to draft responses for batches of similar emails, which you review and send (or refine) in 10-minute sessions twice a day.\n\n**Your Mission:** Configure GPT-5's Gmail integration for semi-autonomous email management.\n\n**Agentic Email Workflow Setup:**\n\n**Step 1: Define Your Email Categories**\n\n```\nMy Email Response Matrix:\n\nCATEGORY 1: Meeting Confirmations/Scheduling\n- Trigger: Email mentions \"meeting,\" \"call,\" \"coffee,\" \"time to chat\"\n- Response pattern: Confirm time, add to calendar, send Zoom link, set reminder\n- Autonomy level: Draft only (I review before sending)\n\nCATEGORY 2: Product/Service Questions (Common FAQs)\n- Trigger: Questions about pricing, features, implementation timeline\n- Response pattern: Direct answer + link to resource + offer follow-up call\n- Autonomy level: Draft only (I review before sending)\n\nCATEGORY 3: Introduction Requests\n- Trigger: \"Would you intro me to...\" or \"Can you connect me with...\"\n- Response pattern: Assess if appropriate, make intro or politely decline\n- Autonomy level: Draft only (relationship-sensitive)\n\nCATEGORY 4: Newsletters/Marketing (Read Later)\n- Trigger: From known senders, promotional language, unsubscribe link\n- Response pattern: Auto-label \"Read/Later\" folder, mark as read, no response\n- Autonomy level: Fully autonomous\n\nCATEGORY 5: Sales Outreach (Not Interested)\n- Trigger: Cold outreach with generic pitch\n- Response pattern: Polite decline or no response, unsubscribe if persistent\n- Autonomy level: Fully autonomous\n\nCATEGORY 6: Urgent/VIP (Escalate to Me)\n- Trigger: From boss, key clients, specific project keywords\n- Response pattern: Notify me immediately, flag for personal response\n- Autonomy level: Alert only (I handle directly)\n```\n\n**Step 2: Configure GPT-5 Gmail Integration**\n\n*(Note: As of November 2025, GPT-5 offers Gmail integration in ChatGPT Plus/Pro)*\n\n```\nGPT-5 GMAIL AGENT CONFIGURATION:\n\nYou are my email assistant with access to my Gmail. Your job:\n- Review incoming emails 2x daily (9 AM, 2 PM)\n- Categorize using my Response Matrix (above)\n- Draft responses for Categories 1-3\n- Automatically handle Categories 4-5\n- Flag Category 6 for my immediate attention\n\nDRAFTING RULES:\n- Use my voice (see voice examples below)\n- Include original email context in draft for my review\n- Flag any uncertainty (\"I wasn't sure if...\" notes)\n- Never send without my approval (Categories 1-3)\n- Do send auto-responses (Categories 4-5) per my rules\n\nVOICE EXAMPLES:\n[Paste 5 of your actual emails showing your style]\n\nERROR HANDLING:\n- If unsure about category: Flag for my review\n- If email contains multiple topics: Break into separate draft responses\n- If email requires decision I haven't given guidance on: Ask me, don't guess\n\nREPORT FORMAT:\nAfter each review session, summarize:\n- Emails processed: [number]\n- Drafts ready for review: [number by category]\n- Auto-handled: [number by category]\n- Flagged urgent: [number]\n- Questions for me: [any uncertainties]\n```\n\n**Step 3: Review Session Workflow**\n\nSet up twice-daily 10-minute review sessions:\n\n**Morning Review (9:15 AM):**\n```\nShow me:\n1. All drafted responses from overnight emails (Categories 1-3)\n2. Any flagged urgent items (Category 6)\n3. Summary of auto-handled emails (Categories 4-5)\n\nFor each draft:\n- Show original email + your draft side-by-side\n- Explain your reasoning (why this tone/approach)\n- Accept my edits or \"Send as-is\" command\n```\n\n**Afternoon Review (2:15 PM):**\n```\n[Same format as morning review for midday emails]\n```\n\n**Step 4: Measuring Success**\n\nTrack these metrics for 2 weeks:\n\n```\nEMAIL MANAGEMENT METRICS:\n\nBEFORE AI (Week 0):\n- Time spent on email: ___ hours/day\n- Emails requiring my writing: ___ per day\n- Average time per email: ___ minutes\n- Emails left unresponded > 24hrs: ___\n\nAFTER AI (Week 2):\n- Time spent on email: ___ hours/day (target: 50% reduction)\n- Emails requiring my writing: ___ per day (target: 60% reduction)\n- Average time per email: ___ minutes (review only)\n- Emails left unresponded > 24hrs: ___ (target: near zero)\n\nTIME SAVED: ___ hours/week\nVALUE OF TIME: ___ hours Ã— $[hourly rate] = $___/week = $___/month\nROI: (Monthly value - $20 subscription) / $20 = ___%\n```\n\n**Advanced Patterns:**\n\n**Pattern 1: Batch Similar Emails**\n```\nI have 12 emails asking about pricing. Draft one master response that I can customize for each. Identify which emails need unique details added (company size, use case, etc.).\n```\n\n**Pattern 2: Thread Management**\n```\nSummarize this 18-email thread and draft my response to move the conversation forward. Include \"Catching up on this thread:\" opening so they know I've read everything.\n```\n\n**Pattern 3: Follow-Up Automation**\n```\nFor any email where I say \"I'll send you [RESOURCE] by [DATE],\" create a calendar reminder and draft the follow-up email with [RESOURCE] attached for me to review on [DATE].\n```\n\n**Expert-Level Achievement:**\nYou'll know you've mastered agentic email management when:\n- You spend < 1 hour/day on email (down from 2-3 hours)\n- 70%+ of your sent emails originated from AI drafts you edited\n- Your response time improved (< 4 hours average)\n- You never miss important emails due to volume\n- You've reclaimed 10+ hours/week for strategic work\n\n---",
    "content_type": "exercise",
    "estimated_minutes": 20,
    "difficulty": "intermediate",
    "is_required": true,
    "display_order": 4,
    "is_published": true
  },
  {
    "lesson_id": "lesson-01",
    "stage_number": 5,
    "title": "Advanced Level (8 minutes)",
    "slug": "advanced-level-8-minutes",
    "content": "### Advanced Level (8 minutes)\n*Agentic email management with GPT-5's Gmail integration*\n\n**Exercise 3: Setting Up Autonomous Email Management**\n\n**Scenario:** You receive 80-120 emails per day. About 60% fall into categories you handle repetitively: meeting confirmations, simple questions about your product, intro requests, newsletter stuff, sales outreach, etc. You want GPT-5 to draft responses for batches of similar emails, which you review and send (or refine) in 10-minute sessions twice a day.\n\n**Your Mission:** Configure GPT-5's Gmail integration for semi-autonomous email management.\n\n**Agentic Email Workflow Setup:**\n\n**Step 1: Define Your Email Categories**\n\n```\nMy Email Response Matrix:\n\nCATEGORY 1: Meeting Confirmations/Scheduling\n- Trigger: Email mentions \"meeting,\" \"call,\" \"coffee,\" \"time to chat\"\n- Response pattern: Confirm time, add to calendar, send Zoom link, set reminder\n- Autonomy level: Draft only (I review before sending)\n\nCATEGORY 2: Product/Service Questions (Common FAQs)\n- Trigger: Questions about pricing, features, implementation timeline\n- Response pattern: Direct answer + link to resource + offer follow-up call\n- Autonomy level: Draft only (I review before sending)\n\nCATEGORY 3: Introduction Requests\n- Trigger: \"Would you intro me to...\" or \"Can you connect me with...\"\n- Response pattern: Assess if appropriate, make intro or politely decline\n- Autonomy level: Draft only (relationship-sensitive)\n\nCATEGORY 4: Newsletters/Marketing (Read Later)\n- Trigger: From known senders, promotional language, unsubscribe link\n- Response pattern: Auto-label \"Read/Later\" folder, mark as read, no response\n- Autonomy level: Fully autonomous\n\nCATEGORY 5: Sales Outreach (Not Interested)\n- Trigger: Cold outreach with generic pitch\n- Response pattern: Polite decline or no response, unsubscribe if persistent\n- Autonomy level: Fully autonomous\n\nCATEGORY 6: Urgent/VIP (Escalate to Me)\n- Trigger: From boss, key clients, specific project keywords\n- Response pattern: Notify me immediately, flag for personal response\n- Autonomy level: Alert only (I handle directly)\n```\n\n**Step 2: Configure GPT-5 Gmail Integration**\n\n*(Note: As of November 2025, GPT-5 offers Gmail integration in ChatGPT Plus/Pro)*\n\n```\nGPT-5 GMAIL AGENT CONFIGURATION:\n\nYou are my email assistant with access to my Gmail. Your job:\n- Review incoming emails 2x daily (9 AM, 2 PM)\n- Categorize using my Response Matrix (above)\n- Draft responses for Categories 1-3\n- Automatically handle Categories 4-5\n- Flag Category 6 for my immediate attention\n\nDRAFTING RULES:\n- Use my voice (see voice examples below)\n- Include original email context in draft for my review\n- Flag any uncertainty (\"I wasn't sure if...\" notes)\n- Never send without my approval (Categories 1-3)\n- Do send auto-responses (Categories 4-5) per my rules\n\nVOICE EXAMPLES:\n[Paste 5 of your actual emails showing your style]\n\nERROR HANDLING:\n- If unsure about category: Flag for my review\n- If email contains multiple topics: Break into separate draft responses\n- If email requires decision I haven't given guidance on: Ask me, don't guess\n\nREPORT FORMAT:\nAfter each review session, summarize:\n- Emails processed: [number]\n- Drafts ready for review: [number by category]\n- Auto-handled: [number by category]\n- Flagged urgent: [number]\n- Questions for me: [any uncertainties]\n```\n\n**Step 3: Review Session Workflow**\n\nSet up twice-daily 10-minute review sessions:\n\n**Morning Review (9:15 AM):**\n```\nShow me:\n1. All drafted responses from overnight emails (Categories 1-3)\n2. Any flagged urgent items (Category 6)\n3. Summary of auto-handled emails (Categories 4-5)\n\nFor each draft:\n- Show original email + your draft side-by-side\n- Explain your reasoning (why this tone/approach)\n- Accept my edits or \"Send as-is\" command\n```\n\n**Afternoon Review (2:15 PM):**\n```\n[Same format as morning review for midday emails]\n```\n\n**Step 4: Measuring Success**\n\nTrack these metrics for 2 weeks:\n\n```\nEMAIL MANAGEMENT METRICS:\n\nBEFORE AI (Week 0):\n- Time spent on email: ___ hours/day\n- Emails requiring my writing: ___ per day\n- Average time per email: ___ minutes\n- Emails left unresponded > 24hrs: ___\n\nAFTER AI (Week 2):\n- Time spent on email: ___ hours/day (target: 50% reduction)\n- Emails requiring my writing: ___ per day (target: 60% reduction)\n- Average time per email: ___ minutes (review only)\n- Emails left unresponded > 24hrs: ___ (target: near zero)\n\nTIME SAVED: ___ hours/week\nVALUE OF TIME: ___ hours Ã— $[hourly rate] = $___/week = $___/month\nROI: (Monthly value - $20 subscription) / $20 = ___%\n```\n\n**Advanced Patterns:**\n\n**Pattern 1: Batch Similar Emails**\n```\nI have 12 emails asking about pricing. Draft one master response that I can customize for each. Identify which emails need unique details added (company size, use case, etc.).\n```\n\n**Pattern 2: Thread Management**\n```\nSummarize this 18-email thread and draft my response to move the conversation forward. Include \"Catching up on this thread:\" opening so they know I've read everything.\n```\n\n**Pattern 3: Follow-Up Automation**\n```\nFor any email where I say \"I'll send you [RESOURCE] by [DATE],\" create a calendar reminder and draft the follow-up email with [RESOURCE] attached for me to review on [DATE].\n```\n\n**Expert-Level Achievement:**\nYou'll know you've mastered agentic email management when:\n- You spend < 1 hour/day on email (down from 2-3 hours)\n- 70%+ of your sent emails originated from AI drafts you edited\n- Your response time improved (< 4 hours average)\n- You never miss important emails due to volume\n- You've reclaimed 10+ hours/week for strategic work\n\n---",
    "content_type": "exercise",
    "estimated_minutes": 25,
    "difficulty": "advanced",
    "is_required": true,
    "display_order": 5,
    "is_published": true
  },
  {
    "lesson_id": "lesson-01",
    "stage_number": 6,
    "title": "ðŸš€ Production Templates",
    "slug": "-production-templates",
    "content": "## ðŸš€ Production Templates\n\nThese templates are battle-tested in real business environments. Copy them into your notes and customize the bracketed fields for instant professional communication.\n\n---\n\n### Template 1: The High-Stakes Email\n**Use when:** Contract negotiation, salary discussion, critical feedback, high-profile partnerships\n\n```\nYou are my executive communication strategist. Draft a high-stakes business email:\n\nRECIPIENT: [Name, Title, Company]\nRELATIONSHIP CONTEXT: [How you know them, recent interactions]\nCURRENT SITUATION: [Factual summary of where things stand]\nDESIRED OUTCOME: [Specific action or decision you want]\nCOMPLEXITY FACTORS: [Politics, sensitivities, competing interests]\n\nTONE: [Professional-assertive/Diplomatic/Data-driven]\nCONSTRAINTS:\n- Length: [150-300] words\n- Must include: [specific point, data, or reference]\n- Must avoid: [language that could backfire]\n- Call-to-action: [specific next step with timeframe]\n\nWrite the email with subject line.\n```\n\n**Example Use:**\n```\nRECIPIENT: Sarah Chen, VP of Marketing, Acme Corp\nRELATIONSHIP CONTEXT: Met at SaaStr conference, had exploratory call last week about partnership\nCURRENT SITUATION: We discussed co-marketing campaign, she asked for ROI projections\nDESIRED OUTCOME: Secure agreement on 90-day pilot program\nCOMPLEXITY FACTORS: Their CEO is risk-averse, need to show low-risk entry point\n\nTONE: Professional-assertive with data backing\nCONSTRAINTS:\n- Length: 200 words\n- Must include: specific metrics from our previous success (40% conversion lift)\n- Must avoid: aggressive sales language\n- Call-to-action: Schedule 30-min call this week to finalize pilot terms\n```\n\n---\n\n### Template 2: The Difficult Conversation\n**Use when:** Delivering bad news, managing conflict, addressing performance issues, declining requests\n\n```\nYou are a conflict resolution specialist. Draft an email to navigate a difficult professional situation:\n\nRECIPIENT: [Name and relationship]\nTHE DIFFICULT TRUTH: [What you need to communicate]\nTHEIR LIKELY REACTION: [How they'll probably feel/respond]\nYOUR GOAL: [Outcome that preserves relationship while being honest]\n\nAPPROACH:\n1. OPENING: [Empathetic acknowledgment of situation]\n2. CORE MESSAGE: [Clear, direct statement of the difficult truth]\n3. CONTEXT: [Brief explanationâ€”not excuseâ€”of why]\n4. PATH FORWARD: [Constructive next steps or alternatives]\n\nTONE: [Empathetic-firm/Accountable/Solution-focused]\nLENGTH: 150-250 words\n\nWrite the email.\n```\n\n**Example Use:**\n```\nRECIPIENT: Michael Torres, freelance designer I've worked with for 2 years\nTHE DIFFICULT TRUTH: His recent work quality has declined; I need to pause our collaboration\nTHEIR LIKELY REACTION: Defensive, possibly hurt, may ask for another chance\nYOUR GOAL: Preserve relationship while being clear about current standards\n\nAPPROACH:\n1. OPENING: Acknowledge our successful history working together\n2. CORE MESSAGE: Recent deliverables haven't met quality bar (specific examples)\n3. CONTEXT: My team's needs have evolved to require faster turnaround with less revision\n4. PATH FORWARD: Suggest 90-day pause, offer to reconnect if his capacity changes\n\nTONE: Empathetic-firm, respectful of past work while clear about current reality\nLENGTH: 200 words\n```\n\n---\n\n### Template 3: The Executive Summary\n**Use when:** Reporting to leadership, summarizing research, making budget requests, proposing initiatives\n\n```\nYou are an executive communication expert. Transform this information into a concise executive summary email:\n\nFOR: [Executive name and role]\nTHEIR PRIMARY CONCERN: [What keeps them up at night related to this]\n\nSOURCE INFORMATION:\n[Paste your raw data, report, meeting notes, or research]\n\nSUMMARY REQUIREMENTS:\n1. TOP-LINE: [Single sentence of most important finding]\n2. KEY DATA: [3-5 critical metrics or facts]\n3. BUSINESS IMPACT: [What this means for revenue/risk/opportunity]\n4. RECOMMENDATION: [Specific action with resource requirements]\n\nFORMAT:\n- Subject line: [Action-oriented, < 50 characters]\n- Opening: [One sentence context]\n- Body: [Structured bullets, data-forward]\n- Close: [Clear ask with deadline]\n- Total length: 150 words maximum\n\nWrite the email.\n```\n\n**Example Use:**\n```\nFOR: Jessica Wu, CMO\nTHEIR PRIMARY CONCERN: Marketing ROI and justifying budget increases\n\nSOURCE INFORMATION:\nQ3 Campaign Analysis: Email program delivered 3,200 leads at $12 CPL. Paid search: 1,800 leads at $45 CPL. Content marketing: 950 leads at $8 CPL. Email had 41% conversion-to-opportunity rate vs. 18% for paid. Our email database grew 22% but we're using a tool built for 1/4 our size. Deliverability dropped from 96% to 87% last quarter. Enterprise plan costs $24K annually but includes automation, segmentation, and dedicated support.\n\nSUMMARY REQUIREMENTS:\n1. TOP-LINE: Email is our highest-ROI channel but infrastructure is limiting growth\n2. KEY DATA: $12 CPL vs $45, 41% conversion vs 18%, deliverability decline to 87%\n3. BUSINESS IMPACT: Leaving ~$180K in pipeline on table due to poor deliverability\n4. RECOMMENDATION: Upgrade to enterprise email platform for $24K (will pay for itself in 6 weeks)\n\nFORMAT: [as specified]\n```\n\n---\n\n### Template 4: The Persuasive Ask\n**Use when:** Requesting resources, seeking approval, asking for introductions, pitching ideas\n\n```\nYou are a persuasion strategist. Draft an email that maximizes the chance of a \"yes\":\n\nTO: [Decision-maker name and role]\nTHE ASK: [Specific request]\nWHAT'S IN IT FOR THEM: [Their benefit, not yours]\nYOUR CREDIBILITY: [Why you're the right person to ask/do this]\nRISK MITIGATION: [Why this is lower-risk than it appears]\n\nSTRUCTURE:\n1. HOOK: [Open with something that matters to them]\n2. THE ASK: [Clear, specific request in one sentence]\n3. THE UPSIDE: [Benefit to them, their team, or company]\n4. THE PROOF: [Evidence this will workâ€”data, examples, testimonials]\n5. THE EASE: [Make it easy to say yesâ€”low commitment, clear next step]\n\nTONE: [Confident-collaborative/Benefit-focused]\nLENGTH: 150-200 words\n\nWrite the email.\n```\n\n**Example Use:**\n```\nTO: David Kim, VP of Product\nTHE ASK: Approval to attend 3-day UX conference ($2,400 total cost)\nWHAT'S IN IT FOR THEM: I'll bring back frameworks to reduce our design-to-dev handoff time (currently 8 days)\nYOUR CREDIBILITY: I've led 12 product launches, always delivered on time\nRISK MITIGATION: Conference is virtual, no travel time lost. I'll share full notes with team and run workshop on best frameworks.\n\nSTRUCTURE:\n1. HOOK: \"I found a solution to our design handoff bottleneck\"\n2. THE ASK: Attend DesignOps Summit Oct 15-17 ($2,400)\n3. THE UPSIDE: Reduce 8-day handoff to ~4 days = ship features 2x faster\n4. THE PROOF: LinkedIn case study shows 60% time reduction using methods taught there\n5. THE EASE: Virtual attendance, I'll train team on frameworks week after, plus full notes shared\n```\n\n---\n\n### Template 5: The Follow-Up That Gets Responses\n**Use when:** No reply to important email, stalled deal, networking follow-up, post-meeting action\n\n```\nYou are a follow-up specialist. Draft an email that re-engages someone who hasn't responded:\n\nORIGINAL CONTEXT: [What you previously sent/discussed]\nTIME ELAPSED: [Days since last contact]\nTHEIR LIKELY REASON FOR NOT RESPONDING: [Busy/Unsure/Not interested/Forgot]\n\nFOLLOW-UP APPROACH:\n1. REFRESH: [Brief reminder of previous conversation]\n2. NEW VALUE: [Additional information, resource, or insight since last contact]\n3. SIMPLIFIED ASK: [Make it easier to respond than last time]\n4. GRACEFUL EXIT: [Give them an out if not interested]\n\nTONE: [Helpful-persistent/Low-pressure]\nLENGTH: 75-125 words (shorter than original)\n\nWrite the email.\n```\n\n**Example Use:**\n```\nORIGINAL CONTEXT: Sent partnership proposal to COO of complementary SaaS company 12 days ago\nTIME ELAPSED: 12 days\nTHEIR LIKELY REASON FOR NOT RESPONDING: Probably buried in inbox, not a top priority right now\n\nFOLLOW-UP APPROACH:\n1. REFRESH: \"Following up on co-marketing partnership idea from Aug 3\"\n2. NEW VALUE: \"Since then, we launched integration with Salesforceâ€”potential to cross-promote to 15K shared users\"\n3. SIMPLIFIED ASK: \"Worth a 15-min exploratory call? If so, here's my Calendly. If timing's not right, totally understand.\"\n4. GRACEFUL EXIT: \"If this isn't a fit, no worriesâ€”just let me know so I'm not filling your inbox\"\n```\n\n---\n\n### Template 6: The \"I Need This By Tomorrow\" Emergency\n**Use when:** Urgent requests, crisis communication, time-sensitive asks, last-minute needs\n\n```\nYou are a crisis communicator. Draft an urgent professional email that respects recipient's time while conveying importance:\n\nRECIPIENT: [Name and role]\nURGENT REQUEST: [What you need]\nDEADLINE: [Specific date/time]\nWHY URGENT: [Legitimate business reason, not poor planning]\nWHAT HAPPENS IF MISSED: [Real consequence]\n\nSTRUCTURE:\n1. SUBJECT: [Must include \"URGENT\" or deadline date]\n2. FIRST LINE: [State deadline and request immediately]\n3. CONTEXT: [2 sentences max on why this is urgent]\n4. SIMPLIFIED TASK: [Make it as easy as possible for them]\n5. APPRECIATION: [Acknowledge the short notice]\n\nTONE: [Direct-respectful/Appreciative]\nLENGTH: 100-150 words\n\nWrite the email.\n```\n\n**Example Use:**\n```\nRECIPIENT: Rachel Moore, Legal Counsel\nURGENT REQUEST: Review and approve 2-page vendor contract\nDEADLINE: Tomorrow (Friday) by 2 PM\nWHY URGENT: Vendor requires signed contract by EOD Friday to meet our product launch date; we didn't know about this requirement until today\nWHAT HAPPENS IF MISSED: 3-week delay in launch, miss our spot in TechCrunch article scheduled for next week\n\nSTRUCTURE:\n1. SUBJECT: \"URGENT: Contract review needed by Fri 2 PM for product launch\"\n2. FIRST LINE: \"I need your review of a 2-page vendor contract by tomorrow (Friday) at 2 PM\"\n3. CONTEXT: \"Vendor just informed us this is required to hit our launch date. Missing it delays us 3 weeks and costs TC coverage.\"\n4. SIMPLIFIED TASK: \"I've highlighted the 3 sections that differ from our standard terms. Everything else is boilerplate.\"\n5. APPRECIATION: \"I know this is short noticeâ€”I'd be happy to bring you coffee and walk through it together if that helps.\"\n```\n\n---\n\n### How to Use These Templates\n\n1. **Save them:** Copy these into your notes app, Notion, or wherever you keep work resources\n2. **Customize once:** Fill in your common scenarios, frequent recipients, your company's tone\n3. **Deploy in seconds:** When you need one, copy the template, fill the brackets, paste into ChatGPT\n4. **Iterate:** If the first draft isn't perfect, tell GPT specifically what to change (\"Make it more assertive\" or \"Add a data point about ROI\")\n5. **Build your library:** Over time, save your best outputs as your own custom templates\n\n### Success Indicator\nâœ… You can draft a professional, high-stakes email in under 2 minutes that would have taken 20 minutes of agonizing over word choice\n\n---",
    "content_type": "practice",
    "estimated_minutes": 20,
    "difficulty": "intermediate",
    "is_required": true,
    "display_order": 6,
    "is_published": true
  }
];

async function insertStages() {
  console.log('=== STEP 3: Creating Insertion Script ===');
  console.log('âœ… Script created: scripts/insert-stages-to-db.ts\n');

  console.log('=== STEP 4: Database Insertion ===\n');
  console.log(`Preparing to insert ${stages.length} stages for lesson-01...\n`);

  // Insert stages
  const { data, error } = await supabase
    .from('lesson_stages')
    .insert(stages)
    .select();

  if (error) {
    console.error('âŒ INSERTION FAILED:');
    console.error('Error:', error);
    console.error('\nData attempted to insert:', JSON.stringify(stages[0], null, 2));
    process.exit(1);
  }

  console.log(`âœ… ${data.length} stages inserted successfully!\n`);
  return data;
}

insertStages()
  .then(() => {
    console.log('=== SUCCESS ===');
    console.log('All stages have been inserted into the database.');
    process.exit(0);
  })
  .catch(error => {
    console.error('âŒ Unexpected error:', error);
    process.exit(1);
  });
